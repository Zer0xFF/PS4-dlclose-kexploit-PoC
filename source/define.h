#define printf(format, ...) \
{ \
	char buffer[512]; \
	int size = sprintf(buffer, format, ##__VA_ARGS__); \
	sceNetSend(g_debugSocket, buffer, size, 0); \
}

char kprintfbuffer[512];
#define kprintf(format, ...) \
{ \
	int size = sprintf(kprintfbuffer, format, ##__VA_ARGS__); \
	int (*sys_sendto)(struct thread *td, struct sendto_args *uap) = (void *)0xFFFFFFFF8249EC10; \
	struct sendto_args args = { \
		g_debugSocket, \
		kprintfbuffer, \
		size, \
		0, \
		NULL, \
		0 \
	}; \
	sys_sendto(td, &args); \
}

struct sendto_args {
	int	s;
	void *	buf;
	size_t	len;
	int	flags;
	void *	to;
	int	tolen;
};


struct auditinfo_addr {
	/*
	8	ai_auid;
	16	ai_mask;
	28	ai_termid;
	8	ai_asid;
	8	ai_flags;
	*/
	char useless[68];
};

//defines probably not needed
struct ucred {
	unsigned int	cr_ref;			/* reference count */
#define	cr_startcopy cr_uid
	uid_t	cr_uid;			/* effective user id */
	uid_t	cr_ruid;		/* real user id */
	uid_t	cr_svuid;		/* saved user id */
	int	cr_ngroups;		/* number of groups */
	gid_t	cr_rgid;		/* real group id */
	gid_t	cr_svgid;		/* saved group id */
	struct uidinfo	*cr_uidinfo;	/* per euid resource consumption */
	struct uidinfo	*cr_ruidinfo;	/* per ruid resource consumption */
	struct prison	*cr_prison;	/* jail(2) */
	struct loginclass	*cr_loginclass; /* login class */
	unsigned int		cr_flags;	/* credential flags */
	void 		*cr_pspare2[2];	/* general use 2 */
#define	cr_endcopy	cr_label
	struct label	*cr_label;	/* MAC label */
	struct auditinfo_addr	cr_audit;	/* Audit properties. */
	gid_t	*cr_groups;		/* groups */
	int	cr_agroups;		/* Available groups */
};

struct fdp {
	char useless[20];
	uint64_t rdir;
	uint64_t jdir;
};

struct proc {
	char useless[40];
	struct ucred *p_ucred;
	char useless2[24];
	struct fdp *td_fdp;
};

struct thread {
	void *useless;
	struct proc *td_proc;
};

struct knote;

struct kevent {
	char useless[32];
};
struct filterops {
	int	f_isfd;		/* true if ident == filedescriptor */
	int	(*f_attach)(struct knote *kn);
	void	(*f_detach)(struct knote *kn);
	int	(*f_event)(struct knote *kn, long hint);
	void	(*f_touch)(struct knote *kn, struct kevent *kev, unsigned long type);
};

struct knote {
	int64_t 		*kn_link;	/* for kq */
	int64_t 		*kn_selnext;	/* for struct selinfo */
	uint64_t 		*kn_knlist;	/* f_attach populated */
	uint64_t 		*kn_tqe;
	uint64_t 		*kn_tqe2;
	uint64_t		*kn_kq;		/* which queue we are on */
	struct 			kevent kn_kevent;
	int			kn_status;	/* protected by kq lock */
	int			kn_sfflags;	/* saved filter flags */
	intptr_t		kn_sdata;	/* saved data field */
	union {
		uint64_t *p_fp;	/* file data pointer */
		uint64_t *p_proc;	/* proc pointer */
		uint64_t *p_aio;	/* AIO job pointer */
		uint64_t *p_lio;	/* LIO job pointer */ 
	} kn_ptr;
	struct			filterops *kn_fop;
	void			*kn_hook;
	int			kn_hookid;
};
